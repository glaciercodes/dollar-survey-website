<html lang="en">

<head>
  
  <meta charset="UTF-8" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>DOLLAR SURVEY</title>

  <link rel="stylesheet" href="homepage-style.css" />

  <style>

  </style>

</head>

<body>
    <div class="user-info">
  <a href="login.html">login</a>
</div>

    <div class="hamburger" onclick="toggleMenu()">
  <span></span>
  <span></span>
  <span></span>
</div>


  <header>
    <div class="menu-container">
  
  <div id="menu-dropdown" class="menu-dropdown">
    <a href="register.html">Register</a>
    <a href="login.html">login</a>
    <a href="about.html">About</a>
    <a href="contact.html">contact-us</a>
    <a href="faqs.html">FAQS</a>
  </div>
</div>


    <div id="title"><h4>DOLLAR SURVEY</h4></div>
    
    <div id="subtitle"><h2>Welcome to Dollar Survey</h2></div>
<h4>start By Answering Surveys Below</h4>

    </div>
    

  </header>
  <div class="referral-section">
  <span id="referral-link">https://dollarsurveys.netlify.app</span>
  <button onclick="shareReferral()">Share Link</button>
  
</div>

</div>

<script>
function shareReferral() {
  const referralUrl = document.getElementById('referral-link').textContent;

  if (navigator.share) {
    navigator.share({
      title: 'Join Dollar Survey',
      text: 'Sign up using my referral link and earn money from surveys:',
      url: referralUrl
    }).catch((err) => {
      console.error('Share failed:', err);
      fallbackCopy(referralUrl);
    });
  } else {
    fallbackCopy(referralUrl);
  }
}

function fallbackCopy(text) {
  navigator.clipboard.writeText(text).then(() => {
    alert("Referral link copied to clipboard!");
  }).catch(err => {
    console.error('Clipboard copy failed:', err);
    alert("Failed to copy link. Please copy it manually.");
  });
}

  function toggleMenu() {
    var menu = document.getElementById("menu-dropdown");
    menu.classList.toggle("show");
  }
</script>
  <h5>Enjoy The Story Survey While You<br> Consider Signing in</h5>
<div>
<p class="survey-question">
1. John signed up on Dollar Survey last month. He began answering three surveys a day, each one giving him $0.10. In just three weeks, he referred 4 friends and accumulated over $15. John is now aiming to reach the $100 withdrawal limit. What do you think about John's strategy?
</p>
<input type="text" class="survey-answer" placeholder="required" />

<p class="survey-question">
2. Clara is a student who uses her break time to complete surveys. She noticed that answering with thoughtful responses earns her more trust and helps her account stay in good standing. One day, she missed a survey and regretted not staying consistent. How important do you think consistency is in earning through surveys?
</p>
<input type="text" class="survey-answer" placeholder="required" />

<p class="survey-question">
3. Dollar Survey introduced a new referral bonus program. If a user refers a friend who also completes surveys regularly, both get a boost in their balance. Mike took advantage of this by sharing his link in WhatsApp groups. What would be your strategy to invite others?
</p>
<input type="text" class="survey-answer" placeholder="required" />

<p class="survey-question">
4. Sarah completed over 100 survey questions honestly. She noticed her balance updated instantly after each session. She now tracks her progress and sets weekly earning goals. How would setting goals help you stay motivated on Dollar Survey?
</p>
<input type="text" class="survey-answer" placeholder="required" />

<p class="survey-question">
5. David had a hard time understanding why his balance wasnâ€™t increasing. After checking, he realized he skipped some questions and gave short answers. He then made sure to complete all inputs seriously. Why is it important to take each survey question seriously?
</p>
<input type="text" class="survey-answer" placeholder="required" />


  <button onclick="submitFullSurvey()">Submit Survey</button>
</div>


<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-app.js";
  import { getFirestore, collection, addDoc, doc, setDoc, getDoc, updateDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-firestore.js";
  import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyDnq2364tMuRPbrjjHmUfFUTjWZC2BmIS4",
    authDomain: "dollar-survey-60fe7.firebaseapp.com",
    projectId: "dollar-survey-60fe7",
    storageBucket: "dollar-survey-60fe7.appspot.com",
    messagingSenderId: "293471697208",
    appId: "1:293471697208:web:664863f09e830e420c69cd"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);
  const auth = getAuth(app);

  let userCountry = "Unknown";

  fetch("https://ipapi.co/json")
    .then(res => res.json())
    .then(data => {
      userCountry = data.country_name || "Unknown";
    });

  // Show user info live
  onAuthStateChanged(auth, async (user) => {
    if (user) {
      document.getElementById("user-email").textContent = `User: ${user.email || 'Anonymous'}`;
      const userRef = doc(db, "users", user.uid);
      const userSnap = await getDoc(userRef);
      const balance = userSnap.exists() ? userSnap.data().balance || 0 : 0;
      document.getElementById("user-balance").textContent = `Balance: $${balance.toFixed(2)}`;
    }
  });

  // Survey submission
  window.submitFullSurvey = async function () {
    const answerEls = document.querySelectorAll(".survey-answer");
    const questionEls = document.querySelectorAll(".survey-question");

    const allAnswered = Array.from(answerEls).every(el => el.value.trim() !== "");
    if (!allAnswered) {
      alert("Please answer all questions before submitting.");
      return;
    }

    const responses = {};
    questionEls.forEach((qEl, idx) => {
      responses[qEl.innerText] = answerEls[idx].value.trim();
    });

    const user = auth.currentUser;
    const uid = user?.uid || "anonymous";
    const email = user?.email || "anonymous@user.com";

    try {
      // Save survey response
      await addDoc(collection(db, "submittedSurveys"), {
        userId: uid,
        email: email,
        responses: responses,
        country: userCountry,
        timestamp: serverTimestamp()
      });

      // Update balance
      const userRef = doc(db, "users", uid);
      const userSnap = await getDoc(userRef);
      const currentBalance = userSnap.exists() ? userSnap.data().balance || 0 : 0;
      const newBalance = currentBalance + 0.5;

      await setDoc(userRef, { balance: newBalance }, { merge: true });

      document.getElementById("user-balance").textContent = `Balance: $${newBalance.toFixed(2)}`;

      alert("Survey submitted. Balance updated!");
      answerEls.forEach(el => el.value = "");

    } catch (err) {
      console.error("Error:", err);
      alert("Survey submission failed.");
    }
  };
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1947981398780941"
     crossorigin="anonymous"></script>

</body>

</html>




