<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Survey Available This Week | InsightReport</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #6a11cb;
            --primary-light: #8a2be2;
            --secondary: #2575fc;
            --white: #ffffff;
            --light-gray: #f5f5f5;
            --dark-gray: #333333;
            --text: #444444;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--white);
            color: var(--text);
            line-height: 1.6;
            scroll-behavior: smooth;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header Styles */
        header {
            background-color: var(--white);
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo-icon {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            font-size: 20px;
        }

        .logo-text {
            font-size: 24px;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* Hero Section */
        .hero {
            text-align: center;
            padding: 60px 0 40px;
            background: linear-gradient(135deg, #f5f7fa 0%, #e4edf5 100%);
        }

        .hero h1 {
            font-size: 42px;
            margin-bottom: 15px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .hero p {
            font-size: 18px;
            max-width: 700px;
            margin: 0 auto 30px;
            color: var(--dark-gray);
        }

        /* Survey Card */
        .survey-section {
            padding: 40px 0 80px;
        }

        .card {
            background-color: var(--white);
            border-radius: 16px;
            box-shadow: var(--shadow);
            overflow: hidden;
            max-width: 800px;
            margin: 0 auto;
        }

        .card-header {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: var(--white);
            padding: 20px 30px;
        }

        .card-header h2 {
            font-size: 28px;
            margin-bottom: 5px;
        }

        .card-body {
            padding: 30px;
        }

        .location-info {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 25px;
            padding: 15px;
            background-color: var(--light-gray);
            border-radius: 10px;
        }

        .location-info i {
            color: var(--primary);
            font-size: 20px;
        }

        .btn {
            display: inline-block;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: var(--white);
            border: none;
            padding: 12px 30px;
            border-radius: 30px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            text-decoration: none;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(106, 17, 203, 0.3);
        }

        .btn-block {
            display: block;
            width: 100%;
            text-align: center;
        }

        /* Survey Form */
        .survey-form {
            display: none;
        }

        .form-group {
            margin-bottom: 25px;
            padding: 15px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            background-color: #f9f9f9;
            transition: all 0.3s ease;
        }

        .form-group:focus-within {
            border-color: var(--primary);
            background-color: #f0f0f0;
            box-shadow: 0 0 0 2px rgba(106, 17, 203, 0.1);
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark-gray);
        }

        .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border 0.3s;
            resize: vertical;
            min-height: 100px;
            font-family: inherit;
            line-height: 1.5;
        }

        .form-group textarea:focus {
            border-color: var(--primary);
            outline: none;
        }

        .form-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 30px;
        }

        /* Subscribe Section */
        .subscribe-section {
            padding: 60px 0;
            background: linear-gradient(135deg, #f8f9ff 0%, #e8f0ff 100%);
        }

        .subscribe-card {
            background: linear-gradient(135deg, var(--primary-light), var(--secondary));
            color: var(--white);
            border-radius: 16px;
            padding: 40px;
            text-align: center;
            max-width: 600px;
            margin: 0 auto;
            box-shadow: var(--shadow);
        }

        .subscribe-card h2 {
            font-size: 32px;
            margin-bottom: 15px;
        }

        .subscribe-card p {
            margin-bottom: 25px;
            font-size: 18px;
            opacity: 0.9;
        }

        .subscribe-form {
            display: flex;
            gap: 10px;
            max-width: 450px;
            margin: 0 auto;
        }

        .subscribe-input {
            flex: 1;
            padding: 12px 20px;
            border: none;
            border-radius: 30px;
            font-size: 16px;
        }

        .subscribe-btn {
            background-color: var(--white);
            color: var(--primary);
            border: none;
            padding: 12px 25px;
            border-radius: 30px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.3s;
        }

        .subscribe-btn:hover {
            transform: translateY(-3px);
        }

        /* Footer */
        footer {
            background-color: var(--dark-gray);
            color: var(--white);
            padding: 50px 0 20px;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .footer-column h3 {
            font-size: 20px;
            margin-bottom: 20px;
            position: relative;
            padding-bottom: 10px;
        }

        .footer-column h3::after {
            content: '';
            position: absolute;
            left: 0;
            bottom: 0;
            width: 40px;
            height: 3px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
        }

        .footer-links {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 12px;
        }

        .footer-links a {
            color: #ccc;
            text-decoration: none;
            transition: color 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .footer-links a:hover {
            color: var(--white);
        }

        .copyright {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid #444;
            color: #aaa;
            font-size: 14px;
        }

        /* Messages */
        .message {
            padding: 12px 20px;
            border-radius: 8px;
            margin: 15px 0;
            display: none;
        }

        .success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        /* Menu Icons */
        .menu-icons {
            display: flex;
            gap: 20px;
        }

        .menu-icon {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            color: var(--text);
            transition: color 0.3s;
            font-size: 14px;
        }

        .menu-icon i {
            font-size: 20px;
            margin-bottom: 5px;
        }

        .menu-icon:hover {
            color: var(--primary);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 15px;
            }

            .hero h1 {
                font-size: 32px;
            }

            .subscribe-form {
                flex-direction: column;
            }

            .card-body {
                padding: 20px;
            }

            .form-footer {
                flex-direction: column;
                gap: 15px;
            }

            .menu-icons {
                gap: 15px;
            }
        }

        @media (max-width: 576px) {
            .hero {
                padding: 40px 0 20px;
            }

            .hero h1 {
                font-size: 28px;
            }

            .subscribe-card {
                padding: 25px;
            }

            .subscribe-card h2 {
                font-size: 26px;
            }

            .menu-icons {
                flex-wrap: wrap;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon">
                        <i class="fas fa-chart-bar"></i>
                    </div>
                    <div class="logo-text">InsightReport</div>
                </div>
                <div class="menu-icons">
                    <a href="#" class="menu-icon">
                        <i class="fas fa-home"></i>
                        <span>Home</span>
                    </a>
                    <a href="#" class="menu-icon">
                        <i class="fas fa-address-card"></i>
                        <span>About Us</span>
                    </a>
                    <a href="#" class="menu-icon">
                        <i class="fas fa-envelope"></i>
                        <span>Contact Us</span>
                    </a>
                    <a href="#" class="menu-icon">
                        <i class="fas fa-file-contract"></i>
                        <span>Terms</span>
                    </a>
                    <a href="#subscribe" class="menu-icon">
                        <i class="fas fa-bell"></i>
                        <span>Subscribe</span>
                    </a>
                </div>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <h1>Survey Available This Week</h1>
            <p>Share your insights and help us understand current trends. Your responses will contribute to valuable data analysis and reports.</p>
        </div>
    </section>

    <!-- Survey Section -->
    <section class="survey-section" id="survey">
        <div class="container">
            <div class="card">
                <div class="card-header">
                    <h2>General Survey</h2>
                    <p>For all users - Share your perspectives</p>
                </div>
                <div class="card-body">
                    <div class="location-info">
                        <i class="fas fa-map-marker-alt"></i>
                        <span id="user-location">Detecting your location...</span>
                    </div>
                    
                    <div id="survey-intro">
                        <p>This survey contains questions about your experiences and opinions. Please answer all questions thoughtfully.</p>
                        <button id="get-started" class="btn btn-block" style="margin-top: 20px;">Get Started</button>
                    </div>
                    
                    <form id="survey-form" class="survey-form">
                        <div class="form-group">
                            <label>What industry or field are you currently working in?</label>
                            <textarea required minlength="1" placeholder="Type your answer here. Press Enter to move to the next line."></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label>What is the biggest challenge you're facing in your work right now?</label>
                            <textarea required minlength="1" placeholder="Type your answer here. Press Enter to move to the next line."></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label>How has technology changed your daily routine in the past year?</label>
                            <textarea required minlength="1" placeholder="Type your answer here. Press Enter to move to the next line."></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label>What skill do you believe is most important for success in today's world?</label>
                            <textarea required minlength="1" placeholder="Type your answer here. Press Enter to move to the next line."></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label>What topic would you like to learn more about in the coming months?</label>
                            <textarea required minlength="1" placeholder="Type your answer here. Press Enter to move to the next line."></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label>How do you typically stay informed about industry trends?</label>
                            <textarea required minlength="1" placeholder="Type your answer here. Press Enter to move to the next line."></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label>What improvement would make the biggest difference in your professional life?</label>
                            <textarea required minlength="1" placeholder="Type your answer here. Press Enter to move to the next line."></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label>What values are most important to you when choosing products or services?</label>
                            <textarea required minlength="1" placeholder="Type your answer here. Press Enter to move to the next line."></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label>How do you balance work demands with personal time?</label>
                            <textarea required minlength="1" placeholder="Type your answer here. Press Enter to move to the next line."></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label>What change would you like to see in your community or industry?</label>
                            <textarea required minlength="1" placeholder="Type your answer here. Press Enter to move to the next line."></textarea>
                        </div>
                        
                        <div class="form-footer">
                            <button type="button" id="back-to-intro" class="btn" style="background: #6c757d;">Back</button>
                            <button type="submit" class="btn">Submit Survey</button>
                        </div>
                    </form>
                    
                    <div id="survey-message" class="message"></div>
                </div>
            </div>
        </div>
    </section>

    <!-- Subscribe Section -->
    <section class="subscribe-section" id="subscribe">
        <div class="container">
            <div class="subscribe-card">
                <h2>Stay Informed</h2>
                <p>Subscribe to our newsletter to receive the latest insights and reports directly to your inbox.</p>
                <form id="subscribe-form" class="subscribe-form">
                    <input type="email" class="subscribe-input" placeholder="Enter your email address" required>
                    <button type="submit" class="subscribe-btn">Subscribe</button>
                </form>
                <div id="subscribe-message" class="message" style="margin-top: 20px;"></div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>InsightReport</h3>
                    <p>Transforming data into actionable insights for better decision making.</p>
                </div>
                <div class="footer-column">
                    <h3>Quick Links</h3>
                    <ul class="footer-links">
                        <li><a href="#"><i class="fas fa-home"></i> Home</a></li>
                        <li><a href="#"><i class="fas fa-address-card"></i> About Us</a></li>
                        <li><a href="#"><i class="fas fa-envelope"></i> Contact Us</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Legal</h3>
                    <ul class="footer-links">
                        <li><a href="#"><i class="fas fa-file-contract"></i> Terms of Service</a></li>
                        <li><a href="#"><i class="fas fa-shield-alt"></i> Privacy Policy</a></li>
                        <li><a href="#"><i class="fas fa-cookie"></i> Cookie Policy</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Connect</h3>
                    <ul class="footer-links">
                        <li><a href="#"><i class="fab fa-twitter"></i> Twitter</a></li>
                        <li><a href="#"><i class="fab fa-linkedin"></i> LinkedIn</a></li>
                        <li><a href="#"><i class="fab fa-facebook"></i> Facebook</a></li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2023 InsightReport. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Firebase SDK -->
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics.js";
        import { getFirestore, collection, addDoc, getDocs, query, where } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCXqNe_BDdh9WIJ9lyrFPeQ_-733qbXW4s",
            authDomain: "realinsightreport.firebaseapp.com",
            projectId: "realinsightreport",
            storageBucket: "realinsightreport.firebasestorage.app",
            messagingSenderId: "1083096764833",
            appId: "1:1083096764833:web:4b526f278471212ba43be0",
            measurementId: "G-6LHBN68HMH"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        const db = getFirestore(app);

        // Make Firebase available globally
        window.firebaseApp = app;
        window.firebaseDb = db;
        window.firebaseCollection = collection;
        window.firebaseAddDoc = addDoc;
        window.firebaseGetDocs = getDocs;
        window.firebaseQuery = query;
        window.firebaseWhere = where;
    </script>

    <!-- Application Script -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Detect user country
            fetch('https://ipapi.co/json/')
                .then(response => response.json())
                .then(data => {
                    document.getElementById('user-location').textContent = `Your country: ${data.country_name}`;
                    window.userCountry = data.country_name;
                })
                .catch(error => {
                    console.error('Error detecting location:', error);
                    document.getElementById('user-location').textContent = 'Country: Unknown';
                    window.userCountry = 'Unknown';
                });
            
            // Survey form handling
            const getStartedBtn = document.getElementById('get-started');
            const surveyIntro = document.getElementById('survey-intro');
            const surveyForm = document.getElementById('survey-form');
            const backToIntroBtn = document.getElementById('back-to-intro');
            const surveyMessage = document.getElementById('survey-message');
            const surveySection = document.getElementById('survey');
            
            getStartedBtn.addEventListener('click', function() {
                surveyIntro.style.display = 'none';
                surveyForm.style.display = 'block';
                // Scroll to the top of the survey form
                surveySection.scrollIntoView({ behavior: 'smooth', block: 'start' });
            });
            
            backToIntroBtn.addEventListener('click', function() {
                surveyForm.style.display = 'none';
                surveyIntro.style.display = 'block';
                // Scroll to the top of the survey section
                surveySection.scrollIntoView({ behavior: 'smooth', block: 'start' });
            });
            
            surveyForm.addEventListener('submit', async function(e) {
                e.preventDefault();
                
                // Validate all fields have at least 1 character
                const textareas = surveyForm.querySelectorAll('textarea');
                let allValid = true;
                
                textareas.forEach(textarea => {
                    if (textarea.value.trim().length < 1) {
                        allValid = false;
                        textarea.style.borderColor = 'red';
                    } else {
                        textarea.style.borderColor = '#ddd';
                    }
                });
                
                if (!allValid) {
                    showMessage(surveyMessage, 'Please answer all questions before submitting.', 'error');
                    return;
                }
                
                // Collect survey responses
                const responses = {};
                textareas.forEach((textarea, index) => {
                    responses[`question_${index + 1}`] = textarea.value.trim();
                });
                
                try {
                    // Save to Firebase
                    await window.firebaseAddDoc(window.firebaseCollection(window.firebaseDb, 'survey_responses'), {
                        country: window.userCountry || 'Unknown',
                        responses: responses,
                        timestamp: new Date()
                    });
                    
                    showMessage(surveyMessage, 'Thank you for completing our survey! Your responses have been recorded.', 'success');
                    surveyForm.reset();
                    surveyForm.style.display = 'none';
                    surveyIntro.style.display = 'block';
                    
                    // Scroll to the top of the survey section after submission
                    setTimeout(() => {
                        surveySection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }, 100);
                    
                    // Reset message after 5 seconds
                    setTimeout(() => {
                        surveyMessage.style.display = 'none';
                    }, 5000);
                } catch (error) {
                    console.error('Error saving survey:', error);
                    showMessage(surveyMessage, 'There was an error submitting your survey. Please try again.', 'error');
                }
            });
            
            // Subscribe form handling
            const subscribeForm = document.getElementById('subscribe-form');
            const subscribeMessage = document.getElementById('subscribe-message');
            
            subscribeForm.addEventListener('submit', async function(e) {
                e.preventDefault();
                const email = subscribeForm.querySelector('input[type="email"]').value.trim();
                
                if (!email) {
                    showMessage(subscribeMessage, 'Please enter a valid email address.', 'error');
                    return;
                }
                
                try {
                    // Check if email already exists
                    const q = window.firebaseQuery(
                        window.firebaseCollection(window.firebaseDb, 'subscribers'), 
                        window.firebaseWhere('email', '==', email)
                    );
                    
                    const querySnapshot = await window.firebaseGetDocs(q);
                    
                    if (!querySnapshot.empty) {
                        showMessage(subscribeMessage, 'This email is already subscribed to our newsletter.', 'error');
                        return;
                    }
                    
                    // Save to Firebase
                    await window.firebaseAddDoc(window.firebaseCollection(window.firebaseDb, 'subscribers'), {
                        email: email,
                        country: window.userCountry || 'Unknown',
                        timestamp: new Date()
                    });
                    
                    showMessage(subscribeMessage, 'Thank you for subscribing! You will receive our latest insights soon.', 'success');
                    subscribeForm.reset();
                    
                    // Reset message after 5 seconds
                    setTimeout(() => {
                        subscribeMessage.style.display = 'none';
                    }, 5000);
                } catch (error) {
                    console.error('Error subscribing:', error);
                    showMessage(subscribeMessage, 'There was an error with your subscription. Please try again.', 'error');
                }
            });
            
            // Helper function to show messages
            function showMessage(element, text, type) {
                element.textContent = text;
                element.className = `message ${type}`;
                element.style.display = 'block';
            }
        });
    </script>
</body>
                            </html>
