<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Survey Available This Week - InsightReport</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <style>
        :root {
            --primary: #6a0dad;
            --secondary: #8a2be2;
            --accent: #ff3366;
            --light: #f8f9fa;
            --dark: #212529;
            --white: #ffffff;
            --gray: #6c757d;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--white);
            color: var(--dark);
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }
        
        /* Header Styles */
        header {
            background-color: var(--white);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            font-size: 20px;
        }
        
        .logo-text {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary);
        }
        
        .nav-links {
            display: flex;
            gap: 30px;
        }
        
        .nav-links a {
            text-decoration: none;
            color: var(--dark);
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: color 0.3s;
        }
        
        .nav-links a:hover {
            color: var(--primary);
        }
        
        /* Main Content */
        main {
            flex: 1;
            padding: 40px 0;
        }
        
        .page-title {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .page-title h1 {
            font-size: 36px;
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        .page-title p {
            font-size: 18px;
            color: var(--gray);
            max-width: 600px;
            margin: 0 auto;
        }
        
        /* Card Styles */
        .card {
            background: var(--white);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            max-width: 800px;
            margin: 0 auto;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
        }
        
        .card-header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: var(--white);
            padding: 25px 30px;
        }
        
        .card-header h2 {
            font-size: 24px;
            margin-bottom: 10px;
        }
        
        .card-body {
            padding: 30px;
        }
        
        .location-info {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(106, 13, 173, 0.1);
            border-radius: 10px;
        }
        
        .location-info i {
            color: var(--primary);
            font-size: 20px;
        }
        
        .btn {
            display: inline-block;
            background: var(--accent);
            color: var(--white);
            padding: 12px 25px;
            border-radius: 30px;
            text-decoration: none;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }
        
        .btn:hover {
            background: #e02e5a;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 51, 102, 0.3);
        }
        
        .btn-block {
            display: block;
            width: 100%;
        }
        
        .btn-purple {
            background: var(--primary);
        }
        
        .btn-purple:hover {
            background: #5a0a9c;
        }
        
        /* Survey Form */
        .survey-form {
            display: none;
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark);
        }
        
        .form-group textarea {
            width: 100%;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            resize: vertical;
            min-height: 100px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(106, 13, 173, 0.1);
        }
        
        .char-count {
            text-align: right;
            font-size: 14px;
            color: var(--gray);
            margin-top: 5px;
        }
        
        .char-count.invalid {
            color: var(--accent);
        }
        
        .progress-container {
            margin-bottom: 25px;
            background-color: #f0f0f0;
            border-radius: 10px;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 10px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            width: 0%;
            transition: width 0.5s ease;
        }
        
        .progress-text {
            text-align: center;
            margin-top: 5px;
            font-size: 14px;
            color: var(--gray);
        }
        
        /* Subscribe Section */
        .subscribe-section {
            margin-top: 50px;
            text-align: center;
        }
        
        .subscribe-card {
            background: linear-gradient(135deg, #f8f5ff 0%, #f0e6ff 100%);
            border-radius: 15px;
            padding: 40px;
            max-width: 600px;
            margin: 0 auto;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        
        .subscribe-card h2 {
            color: var(--primary);
            margin-bottom: 15px;
            font-size: 28px;
        }
        
        .subscribe-card p {
            color: var(--gray);
            margin-bottom: 25px;
            font-size: 16px;
        }
        
        .subscribe-form {
            display: flex;
            gap: 10px;
            max-width: 400px;
            margin: 0 auto;
        }
        
        .subscribe-form input {
            flex: 1;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 30px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        .subscribe-form input:focus {
            outline: none;
            border-color: var(--primary);
        }
        
        .message {
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            text-align: center;
            display: none;
        }
        
        .message.success {
            background: rgba(46, 204, 113, 0.1);
            color: #27ae60;
            border: 1px solid #2ecc71;
        }
        
        .message.error {
            background: rgba(231, 76, 60, 0.1);
            color: #c0392b;
            border: 1px solid #e74c3c;
        }
        
        /* Share Section */
        .share-section {
            margin-top: 30px;
            text-align: center;
        }
        
        .share-btn {
            background: var(--white);
            color: var(--primary);
            border: 2px solid var(--primary);
            padding: 10px 20px;
            border-radius: 30px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
        }
        
        .share-btn:hover {
            background: var(--primary);
            color: var(--white);
        }
        
        /* Footer Styles */
        footer {
            background: var(--dark);
            color: var(--white);
            padding: 40px 0 20px;
            margin-top: 50px;
        }
        
        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }
        
        .footer-column h3 {
            color: var(--white);
            margin-bottom: 20px;
            font-size: 18px;
        }
        
        .footer-links {
            list-style: none;
        }
        
        .footer-links li {
            margin-bottom: 10px;
        }
        
        .footer-links a {
            color: #ccc;
            text-decoration: none;
            transition: color 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .footer-links a:hover {
            color: var(--white);
        }
        
        .copyright {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #ccc;
            font-size: 14px;
        }
        
        /* Responsive Styles */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 15px;
            }
            
            .nav-links {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .subscribe-form {
                flex-direction: column;
            }
            
            .card-body {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <div class="logo-text">InsightReport</div>
                </div>
                <div class="nav-links">
                    <a href="index.html"><i class="fas fa-poll"></i> Home</a>
                    <a href="about.html"><i class="fas fa-address-card"></i> About Us</a>
                    <a href="termsofservice.html"><i class="fas fa-file-contract"></i> Terms of Service</a>
                    <a href="contact.html"><i class="fas fa-envelope"></i> Contact Us</a>
                    <a href="subscribe.html" id="subscribe-nav"><i class="fas fa-bell"></i> Subscribe</a>
                </div>
            </div>
        </div>
    </header>

    <main>
        <div class="container">
            <div class="page-title">
                <h1>Survey Available This Week</h1>
                <p>Share your insights and help us understand global trends. Your responses contribute to our comprehensive data analysis.</p>
            </div>

            <div class="card">
                <div class="card-header">
                    <h2>General Survey (For All Users)</h2>
                    <p>Help us understand your perspective on online earning trends</p>
                </div>
                <div class="card-body">
                    <div class="location-info">
                        <i class="fas fa-map-marker-alt"></i>
                        <span id="country-name">Detecting your location...</span>
                    </div>
                    
                    <div id="survey-intro">
                        <p>This comprehensive survey focuses on your experiences and opinions regarding online earning opportunities. Your detailed responses will help us analyze global trends and provide better insights.</p>
                        <p><strong>Note:</strong> Each response requires a minimum of 10 words to ensure quality data.</p>
                        <button id="get-started-btn" class="btn btn-block">Get Started</button>
                    </div>
                    
                    <form id="survey-form" class="survey-form">
                        <div class="progress-container">
                            <div class="progress-bar" id="progress-bar"></div>
                        </div>
                        <div class="progress-text" id="progress-text">0/20 questions completed</div>
                        
                        <div class="form-group">
                            <label>What online earning methods have you tried in the past year?</label>
                            <textarea id="q1" placeholder="Please describe the online earning methods you've explored in detail..."></textarea>
                            <div class="char-count"><span id="q1-count">0</span> words (Minimum: 10 words)</div>
                        </div>
                        
                        <div class="form-group">
                            <label>What challenges have you faced while earning money online?</label>
                            <textarea id="q2" placeholder="Describe any difficulties or obstacles you've encountered..."></textarea>
                            <div class="char-count"><span id="q2-count">0</span> words (Minimum: 10 words)</div>
                        </div>
                        
                        <div class="form-group">
                            <label>How has online earning impacted your financial situation?</label>
                            <textarea id="q3" placeholder="Share how online income has affected your finances..."></textarea>
                            <div class="char-count"><span id="q3-count">0</span> words (Minimum: 10 words)</div>
                        </div>
                        
                        <div class="form-group">
                            <label>What skills have you developed to improve your online earning potential?</label>
                            <textarea id="q4" placeholder="Describe any skills you've learned or improved..."></textarea>
                            <div class="char-count"><span id="q4-count">0</span> words (Minimum: 10 words)</div>
                        </div>
                        
                        <div class="form-group">
                            <label>What platforms or tools do you find most effective for online work?</label>
                            <textarea id="q5" placeholder="Mention specific platforms, apps, or tools you use..."></textarea>
                            <div class="char-count"><span id="q5-count">0</span> words (Minimum: 10 words)</div>
                        </div>
                        
                        <div class="form-group">
                            <label>How do you see the future of online earning evolving?</label>
                            <textarea id="q6" placeholder="Share your predictions or expectations..."></textarea>
                            <div class="char-count"><span id="q6-count">0</span> words (Minimum: 10 words)</div>
                        </div>
                        
                        <div class="form-group">
                            <label>What advice would you give to someone starting with online earning?</label>
                            <textarea id="q7" placeholder="Provide tips or guidance based on your experience..."></textarea>
                            <div class="char-count"><span id="q7-count">0</span> words (Minimum: 10 words)</div>
                        </div>
                        
                        <div class="form-group">
                            <label>How do you balance online work with other responsibilities?</label>
                            <textarea id="q8" placeholder="Describe your time management strategies..."></textarea>
                            <div class="char-count"><span id="q8-count">0</span> words (Minimum: 10 words)</div>
                        </div>
                        
                        <div class="form-group">
                            <label>What motivates you to continue earning online?</label>
                            <textarea id="q9" placeholder="Share what drives your online work efforts..."></textarea>
                            <div class="char-count"><span id="q9-count">0</span> words (Minimum: 10 words)</div>
                        </div>
                        
                        <div class="form-group">
                            <label>How do you stay updated with new online earning opportunities?</label>
                            <textarea id="q10" placeholder="Describe your methods for discovering new opportunities..."></textarea>
                            <div class="char-count"><span id="q10-count">0</span> words (Minimum: 10 words)</div>
                        </div>
                        
                        <div class="form-group">
                            <label>What role does social media play in your online earning activities?</label>
                            <textarea id="q11" placeholder="Explain how you use social media for earning..."></textarea>
                            <div class="char-count"><span id="q11-count">0</span> words (Minimum: 10 words)</div>
                        </div>
                        
                        <div class="form-group">
                            <label>How do you handle taxes and financial planning for your online income?</label>
                            <textarea id="q12" placeholder="Describe your approach to financial management..."></textarea>
                            <div class="char-count"><span id="q12-count">0</span> words (Minimum: 10 words)</div>
                        </div>
                        
                        <div class="form-group">
                            <label>What security measures do you take to protect your online earnings?</label>
                            <textarea id="q13" placeholder="Explain your security practices and concerns..."></textarea>
                            <div class="char-count"><span id="q13-count">0</span> words (Minimum: 10 words)</div>
                        </div>
                        
                        <div class="form-group">
                            <label>How has the pandemic affected your online earning patterns?</label>
                            <textarea id="q14" placeholder="Describe changes in your online work since COVID-19..."></textarea>
                            <div class="char-count"><span id="q14-count">0</span> words (Minimum: 10 words)</div>
                        </div>
                        
                        <div class="form-group">
                            <label>What demographic factors influence your online earning opportunities?</label>
                            <textarea id="q15" placeholder="Discuss how age, location, or education affect your earnings..."></textarea>
                            <div class="char-count"><span id="q15-count">0</span> words (Minimum: 10 words)</div>
                        </div>
                        
                        <div class="form-group">
                            <label>How do you measure success in your online earning endeavors?</label>
                            <textarea id="q16" placeholder="Explain your criteria for measuring success..."></textarea>
                            <div class="char-count"><span id="q16-count">0</span> words (Minimum: 10 words)</div>
                        </div>
                        
                        <div class="form-group">
                            <label>What ethical considerations do you face in online earning?</label>
                            <textarea id="q17" placeholder="Discuss any ethical dilemmas or considerations..."></textarea>
                            <div class="char-count"><span id="q17-count">0</span> words (Minimum: 10 words)</div>
                        </div>
                        
                        <div class="form-group">
                            <label>How do cultural differences impact online earning opportunities?</label>
                            <textarea id="q18" placeholder="Share your perspective on cultural influences..."></textarea>
                            <div class="char-count"><span id="q18-count">0</span> words (Minimum: 10 words)</div>
                        </div>
                        
                        <div class="form-group">
                            <label>What support systems do you rely on for your online work?</label>
                            <textarea id="q19" placeholder="Describe any communities, mentors, or resources..."></textarea>
                            <div class="char-count"><span id="q19-count">0</span> words (Minimum: 10 words)</div>
                        </div>
                        
                        <div class="form-group">
                            <label>How do you envision online earning evolving in the next five years?</label>
                            <textarea id="q20" placeholder="Share your long-term predictions and hopes..."></textarea>
                            <div class="char-count"><span id="q20-count">0</span> words (Minimum: 10 words)</div>
                        </div>
                        
                        <button type="submit" id="submit-survey" class="btn btn-block btn-purple" disabled>Submit Survey</button>
                    </form>
                    
                    <div id="survey-success" class="message success" style="display: none;">
                        <i class="fas fa-check-circle"></i> Thank you! Your survey responses have been successfully submitted.
                    </div>
                </div>
            </div>
            
            <div class="share-section">
                <button class="share-btn" id="share-survey">
                    <i class="fas fa-share-alt"></i> Share This Survey
                </button>
            </div>
          
            <div class="subscribe-section">
                <div class="subscribe-card">
                    <h2>Stay Informed</h2>
                    <p>Subscribe to our newsletter to receive the latest insights and survey opportunities.</p>
                    <form id="subscribe-form" class="subscribe-form">
                        <input type="email" id="subscribe-email" placeholder="Enter your email address" required>
                        <button type="submit" class="btn">Subscribe</button>
                    </form>
                    <div id="subscribe-message" class="message"></div>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <div class="footer-content">
              
               <div class="footer-column">

                    <h3>Follow us on..</h3>

                    <ul class="footer-links">

                        <li><a href="https://www.facebook.com/profile.php?id=61582762929958"><i class="fab fa-facebook"></i> Facebook</a></li>

                        <li><a href="https://x.com/health_hubss?t=j4f-0vi0Sp5hLeecZlxraQ&s=09"><i class="fab fa-twitter"></i> twitter</a></li>

                        <li><a href="https://whatsapp.com/channel/0029VaSor7M0LKZHGVh8872O"><i class="fab fa-whatsapp"></i> whatsapp</a></li>
                                      <li><a href="https://t.me/+0uDfyWxNHo0wMWZk"><i class="fab fa-telegram"></i> telegram</a></li>

                                      <li><a href="https://www.tiktok.com/@healthhubss?_t=ZM-90uXILoCNyq&_r=1"><i class="fab fa-tiktok"></i> tiktok</a></li>
                    </ul>

                </div>

            </div>
                <div class="footer-column">
                    <h3>InsightReport</h3>
                    <ul class="footer-links">
                        <li><a href="index.html"><i class="fas fa-home"></i> Home</a></li>
                        <li><a href="survey.html"><i class="fas fa-poll"></i> Surveys</a></li>
                        <li><a href="about.html"><i class="fas fa-newspaper"></i> Who We Are</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Connect</h3>
                    <ul class="footer-links">
                        <li><a href="contact.html"><i class="fas fa-envelope"></i> Contact</a></li>
                        <li><a href="xavier.html"><i class="fas fa-headset"></i> Support team</a></li>
                        <li><a href="termsofservice.html"><i class="fas fa-file-contract"></i> Terms of Service</a></li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2025 InsightReport - Weekly Global Data Analysis. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCXqNe_BDdh9WIJ9lyrFPeQ_-733qbXW4s",
            authDomain: "realinsightreport.firebaseapp.com",
            projectId: "realinsightreport",
            storageBucket: "realinsightreport.firebasestorage.app",
            messagingSenderId: "1083096764833",
            appId: "1:1083096764833:web:4b526f278471212ba43be0",
            measurementId: "G-6LHBN68HMH"
        };

        // Initialize Firebase
        if (!firebase.apps.length) {
            firebase.initializeApp(firebaseConfig);
        }
        const db = firebase.firestore();

        // DOM elements
        const getStartedBtn = document.getElementById('get-started-btn');
        const surveyIntro = document.getElementById('survey-intro');
        const surveyForm = document.getElementById('survey-form');
        const submitSurveyBtn = document.getElementById('submit-survey');
        const surveySuccess = document.getElementById('survey-success');
        const countryName = document.getElementById('country-name');
        const subscribeForm = document.getElementById('subscribe-form');
        const subscribeEmail = document.getElementById('subscribe-email');
        const subscribeMessage = document.getElementById('subscribe-message');
        const shareSurveyBtn = document.getElementById('share-survey');
        const subscribeNav = document.getElementById('subscribe-nav');
        const progressBar = document.getElementById('progress-bar');
        const progressText = document.getElementById('progress-text');
        
        // Questions array
        const questions = [
            "What online earning methods have you tried in the past year?",
            "What challenges have you faced while earning money online?",
            "How has online earning impacted your financial situation?",
            "What skills have you developed to improve your online earning potential?",
            "What platforms or tools do you find most effective for online work?",
            "How do you see the future of online earning evolving?",
            "What advice would you give to someone starting with online earning?",
            "How do you balance online work with other responsibilities?",
            "What motivates you to continue earning online?",
            "How do you stay updated with new online earning opportunities?",
            "What role does social media play in your online earning activities?",
            "How do you handle taxes and financial planning for your online income?",
            "What security measures do you take to protect your online earnings?",
            "How has the pandemic affected your online earning patterns?",
            "What demographic factors influence your online earning opportunities?",
            "How do you measure success in your online earning endeavors?",
            "What ethical considerations do you face in online earning?",
            "How do cultural differences impact online earning opportunities?",
            "What support systems do you rely on for your online work?",
            "How do you envision online earning evolving in the next five years?"
        ];
        
        // User data
        let userCountry = "Unknown";
        let userEmail = "";
        
        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            // Detect user's country
            detectCountry();
            
            // Set up word counters for textareas
            setupWordCounters();
            
            // Set up event listeners
            getStartedBtn.addEventListener('click', startSurvey);
            surveyForm.addEventListener('input', validateSurveyForm);
            surveyForm.addEventListener('submit', submitSurvey);
            subscribeForm.addEventListener('submit', handleSubscription);
            shareSurveyBtn.addEventListener('click', shareSurvey);
            subscribeNav.addEventListener('click', function(e) {
                e.preventDefault();
                document.querySelector('.subscribe-section').scrollIntoView({ 
                    behavior: 'smooth' 
                });
            });
        });
        
        // Detect user's country using IP
        function detectCountry() {
            fetch('https://ipapi.co/json/')
                .then(response => response.json())
                .then(data => {
                    userCountry = data.country_name;
                    countryName.textContent = `Your location: ${userCountry}`;
                })
                .catch(error => {
                    console.error('Error detecting country:', error);
                    // Fallback to a free API if the first one fails
                    fetch('https://api.country.is/')
                        .then(response => response.json())
                        .then(data => {
                            userCountry = data.country;
                            countryName.textContent = `Your location: ${userCountry}`;
                        })
                        .catch(error2 => {
                            console.error('Error detecting country with fallback:', error2);
                            countryName.textContent = 'Your location: Unknown';
                        });
                });
        }
        
        // Start the survey
        function startSurvey() {
            surveyIntro.style.display = 'none';
            surveyForm.style.display = 'block';
        }
        
        // Count words in a string
        function countWords(text) {
            return text.trim().split(/\s+/).filter(word => word.length > 0).length;
        }
        
        // Set up word counters for all textareas
        function setupWordCounters() {
            for (let i = 1; i <= 20; i++) {
                const textarea = document.getElementById(`q${i}`);
                const counter = document.getElementById(`q${i}-count`);
                
                textarea.addEventListener('input', function() {
                    const wordCount = countWords(this.value);
                    counter.textContent = wordCount;
                    
                    if (wordCount < 10) {
                        counter.classList.add('invalid');
                    } else {
                        counter.classList.remove('invalid');
                    }
                    
                    validateSurveyForm();
                    updateProgress();
                });
            }
        }
        
        // Update progress bar and text
        function updateProgress() {
            let completed = 0;
            for (let i = 1; i <= 20; i++) {
                const textarea = document.getElementById(`q${i}`);
                if (countWords(textarea.value) >= 10) {
                    completed++;
                }
            }
            
            const percentage = (completed / 20) * 100;
            progressBar.style.width = `${percentage}%`;
            progressText.textContent = `${completed}/20 questions completed`;
        }
        
        // Validate the survey form
        function validateSurveyForm() {
            let allValid = true;
            
            for (let i = 1; i <= 20; i++) {
                const textarea = document.getElementById(`q${i}`);
                if (countWords(textarea.value) < 10) {
                    allValid = false;
                    break;
                }
            }
            
            submitSurveyBtn.disabled = !allValid;
        }
        
        // Submit the survey
        function submitSurvey(e) {
            e.preventDefault();
            
            // Collect responses
            const responses = {};
            for (let i = 1; i <= 20; i++) {
                const question = questions[i-1];
                const answer = document.getElementById(`q${i}`).value;
                responses[question] = answer;
            }
            
            // Prepare data for Firebase
            const surveyData = {
                country: userCountry,
                email: userEmail || "Not provided",
                responses: responses,
                timestamp: new Date().toISOString()
            };
            
            // Save to Firebase
            db.collection("surveyResponses").add(surveyData)
                .then((docRef) => {
                    console.log("Survey submitted with ID: ", docRef.id);
                    
                    // Show success message
                    surveyForm.style.display = 'none';
                    surveySuccess.style.display = 'block';
                    
                    // Scroll to success message
                    surveySuccess.scrollIntoView({ behavior: 'smooth' });
                })
                .catch((error) => {
                    console.error("Error submitting survey: ", error);
                    alert("There was an error submitting your survey. Please try again.");
                });
        }
        
        // Handle email subscription
        function handleSubscription(e) {
            e.preventDefault();
            
            const email = subscribeEmail.value.trim();
            
            if (!email) {
                showSubscribeMessage("Please enter a valid email address.", "error");
                return;
            }
            
            if (!validateEmail(email)) {
                showSubscribeMessage("Please enter a valid email address.", "error");
                return;
            }
            
            // Check if email already exists
            db.collection("subscribers")
                .where("email", "==", email)
                .get()
                .then((querySnapshot) => {
                    if (!querySnapshot.empty) {
                        showSubscribeMessage("This email is already subscribed.", "error");
                        return;
                    }
                    
                    // Save to Firebase
                    return db.collection("subscribers").add({
                        email: email,
                        country: userCountry,
                        subscribedAt: new Date().toISOString()
                    });
                })
                .then(() => {
                    showSubscribeMessage("Thank you for subscribing! to our exclusive community! You've been successfully subscribed and are now eligible for our weekly gift card drawings.👏"", "success");
                    subscribeEmail.value = "";
                    userEmail = email;
                })
                .catch((error) => {
                    console.error("Error subscribing: ", error);
                    showSubscribeMessage("There was an error processing your subscription. Please try again.", "error");
                });
        }
        
        // Email validation
        function validateEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email);
        }
        
        // Show subscription message
        function showSubscribeMessage(message, type) {
            subscribeMessage.textContent = message;
            subscribeMessage.className = `message ${type}`;
            subscribeMessage.style.display = 'block';
            
            // Scroll to message
            subscribeMessage.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            
            // Hide message after 5 seconds
            setTimeout(() => {
                subscribeMessage.style.display = 'none';
            }, 5000);
        }
        
        // Share survey
        function shareSurvey() {
            if (navigator.share) {
                navigator.share({
                    title: 'InsightReport Survey',
                    text: 'Help Take part in this survey to boost real and verified insights ',
                    url: window.location.href
                })
                .then(() => console.log('Survey shared successfully'))
                .catch(error => console.log('Error sharing:', error));
            } else {
                // Fallback for browsers that don't support Web Share API
                const tempInput = document.createElement('input');
                tempInput.value = window.location.href;
                document.body.appendChild(tempInput);
                tempInput.select();
                document.execCommand('copy');
                document.body.removeChild(tempInput);
                
                alert('Survey link copied to clipboard!');
            }
        }
    </script>
</body>
</html>
